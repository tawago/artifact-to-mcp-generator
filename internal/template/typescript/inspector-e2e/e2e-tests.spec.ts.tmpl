import { test, expect } from '@playwright/test';

test.describe('MCP Server Tests', () => {
  test.beforeEach(async ({ page }) => {
    // Navigate to the MCP Inspector
    await page.goto('/');
    
    // Click the Connect button
    await page.getByRole('button', { name: 'Connect' }).click();
    await expect(page.getByText('Connected')).toBeVisible();
    
    // Click the List Tools button
    await page.getByRole('button', { name: 'List Tools' }).click();
  });

  test('should list available tools', async ({ page }) => {
    // Check if tools are listed
    {{- range $funcIndex, $func := .Functions -}}
    {{- if not $func.IsConstructor -}}
    {{- if not $func.IsFallback -}}
    {{- if not $func.IsReceive -}}
    {{- if or (eq (printf "%s" $func.StateMutability) "view") (eq (printf "%s" $func.StateMutability) "pure") }}
    await expect(page.getByText('{{$func.Name}}', { exact: true })).toBeVisible();
    {{- end -}}
    {{- end -}}
    {{- end -}}
    {{- end -}}
    {{- end }}
  });
});