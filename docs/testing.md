# Testing the Generated MCP Server

This document describes how to test the MCP server generated by the artifact-to-mcp-generator tool.

## Prerequisites

- Node.js (v16 or later)
- npm
- Go (v1.18 or later)

## Testing Workflow

### 1. Generate the MCP Server

First, generate an MCP server for an ERC-20 contract:

```bash
# Build the generator
make build

# Generate an MCP server for the ERC-20 contract
make example
```

This will create an MCP server in the `mcp-server` directory.

### 2. Manual Testing with MCP Inspector

You can manually test the generated MCP server using the MCP Inspector:

```bash
# Build the MCP server
cd mcp-server
npm install
npm run build

# Run the MCP Inspector with the generated server
npx @modelcontextprotocol/inspector node dist/server.js
```

The MCP Inspector will open in your browser, allowing you to:
- View the available tools
- Execute tools with different parameters
- See the results of tool executions

### 3. Automated Testing with Playwright

For automated testing, we use Playwright to interact with the MCP Inspector UI:

```bash
# Navigate to the tests directory
cd tests

# Install dependencies
npm install

# Run the tests
./run-tests.sh
```

The Playwright tests verify that:
1. The MCP server connects successfully
2. All tools are listed correctly
3. Each tool can be executed with valid parameters
4. Error handling works as expected

## Test Structure

The automated tests are organized as follows:

- `tests/e2e/mcp-server.spec.ts`: Main test file containing all test cases
- `tests/playwright.config.ts`: Playwright configuration
- `tests/run-tests.sh`: Script to build the MCP server and run the tests

## Adding New Tests

To add new tests:

1. Add new test cases to `tests/e2e/mcp-server.spec.ts`
2. Follow the existing pattern for testing tools
3. Run the tests to verify they work correctly

## Troubleshooting

### Common Issues

1. **Connection Issues**:
   - Make sure the MCP server is built correctly
   - Check that the RPC URL is accessible
   - Verify the contract address is correct

2. **Test Failures**:
   - Check the screenshots in the test output directory
   - Look for error messages in the console output
   - Verify that the selectors in the tests match the UI elements

3. **Timeout Errors**:
   - Increase the timeout values in the test
   - Check network connectivity
   - Verify that the RPC provider is responding